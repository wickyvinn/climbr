
{% extends 'layout.html' %}

{% block head %}
  {% parent %}
    <link href='../css/profile.css' rel='stylesheet'>
    <style>
      #profilePhoto {
        width:100%; 
      }
      #uploadForm {
        margin-top: 10px;
        text-align:center ;
      }
      #chooseFileProxy {
        text-align: center;
      }
      .profileContainer {
        margin: 4%;
        background-color: #D8DCDC;
      }
      .hiddener {
        display: hidden;
      }
    </style>
{% endblock %}

{% block content %}    
  {% parent %} 
  <div class="container">   
  
  <form id = "uploadForm" enctype = "multipart/form-data" action = "/photo" method = "post">
    <button id="chooseFileProxy" class="btn btn-default submitBtn" onclick="chooseFile()">CHOOSE A PHOTO!</button>
    <div style='height: 0px;width:0px; overflow:hidden;'>
      <input type="file" name="userPhoto" capture="camera" accept="image/*" id="userPhoto"/>
    </div>

    <div class="profileContainer"><img id="profilePhoto"></div> 
      
    <input class="btn btn-default submitBtn" type="submit" value="UPLOAD IMAGE" name="submit">
  </form>

  

    
    <script>

      $("#profilePhoto").attr("src", "{{ defaultPhoto }}");

      function chooseFile(){
        document.getElementById("userPhoto").click();
        event.preventDefault()
      }

      // credit: http://www.raymondcamden.com/2013/05/20/Capturing-camerapicture-data-without-PhoneGap
      var desiredWidth;
      $(document).ready(function() {
        $("#userPhoto").on("change",showPhoto);
        desiredWidth = window.innerWidth;
      });
      // credit: https://www.youtube.com/watch?v=EPYnGFEcis4&feature=youtube_gdata_player
      function showPhoto(event) {
        if (event.target.files.length == 1 && event.target.files[0].type.indexOf("image/") == 0) {
          $("#profilePhoto").attr("src",URL.createObjectURL(event.target.files[0]));
        }
      }
    </script>    

  </body>
 
</html>
